<div class="row">
  <div [@pageTransition]="state">
    <div class="card card-user" id="domandecontratto">
      <div class="card-header">
        <h3 class="card-title">Dettagli Contratto per il prodotto: {{ prodottoselezionato }}</h3>
      </div>
      <div class="card-body">
        <form class="row row-cols-sm-auto">
          <div class="col-12">
            Indica le seguenti informazioni per il contratto
          </div>
        </form>

        <form [formGroup]="SetOpt" ngNativeValidate>
          <div class="row" *ngFor="let item of list">
            <div *ngIf="item.tipoRisposta == 2" class="row rowdcp mb-3 mt-3">
              <div class="col-md-6 align-self-center text-left">
                <div class="form-group text-uppercase">
                  <label for="dp">{{ item.domanda }}</label>
                  <input class="form-control" placeholder="yyyy-mm-dd" name="dp" [(ngModel)]="model" ngbDatepicker #d="ngbDatepicker" [required]="item.obbligatorio" />
                  <button class="btn btn-outline-secondary nc-icon nc-calendar-60" (click)="d.toggle()" type="button"></button>

                  <div *ngIf="SetOpt.get(item.domanda)?.hasError('required') && (SetOpt.get(item.domanda)?.touched || SetOpt.get(item.domanda)?.dirty)" class="text-danger">
                    Questo campo è obbligatorio.
                  </div>
                </div>
              </div>
            </div>

            <div *ngIf="item.tipoRisposta == 0" class="row rowdcp mb-3 mt-3">
              <div class="col-md-6 align-self-center text-left">
                <div class="form-group text-uppercase">
                  <label for="ragione_sociale">{{ item.domanda }}</label>
                  <input [ngClass]="{'input-error': SetOpt.get(item.domanda)?.errors && showErrors}" type="text" class="form-control" formControlName="{{ item.domanda }}" placeholder="Inserisci {{ item.domanda }}" value="" [required]="item.obbligatorio">

                  <div *ngIf="SetOpt.get(item.domanda)?.hasError('required') && (SetOpt.get(item.domanda)?.touched || SetOpt.get(item.domanda)?.dirty)" class="text-danger">
                    Questo campo è obbligatorio.
                  </div>
                </div>
              </div>
            </div>

            <div *ngIf="item.tipoRisposta == 1" class="row rowdcp mb-3 mt-3">
              <div class="col-md-6 align-self-center text-left">
                <div class="form-group text-uppercase">
                  <label>{{ item.domanda }}</label>
                  <div class="form-check form-switch ">
                    <input [ngClass]="{'input-error': SetOpt.get(item.domanda)?.errors && showErrors}" class="form-check-input" type="checkbox" value="" id="flexCheckChecked" formControlName="{{ item.domanda }}" [required]="item.obbligatorio">

                    <div *ngIf="SetOpt.get(item.domanda)?.hasError('required') && (SetOpt.get(item.domanda)?.touched || SetOpt.get(item.domanda)?.dirty)" class="text-danger">
                      Questo campo è obbligatorio.
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div *ngIf="item.tipoRisposta == 3" class="row rowdcp mb-3 mt-3">
              <div class="col-md-6 align-self-center text-left">
                <div class="form-group text-uppercase">
                  <label>{{ item.domanda }}</label>
                  <div>
                    <select [ngClass]="{'input-error': SetOpt.get(item.domanda)?.errors && showErrors}" class="form-select" formControlName="{{ item.domanda }}" [required]="item.obbligatorio">
                      <option value="" selected disabled>--</option>
                      <option *ngFor="let selezione of item.multipla; trackBy: trackByFn">{{ selezione }}</option>
                    </select>
                    <div *ngIf="SetOpt.get(item.domanda)?.hasError('required') && (SetOpt.get(item.domanda)?.touched || SetOpt.get(item.domanda)?.dirty)" class="text-danger">
                      Questo campo è obbligatorio.
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="item.tipoRisposta == 4" class="row rowdcp mb-3 mt-3">
              <div class="col-md-6 align-self-center text-left">
                <div class="form-group text-uppercase">
                  <label for="ragione_sociale">{{ item.domanda }}</label>
                  <input [ngClass]="{'input-error': SetOpt.get(item.domanda)?.errors && showErrors}" type="number" class="form-control" formControlName="{{ item.domanda }}" placeholder="Inserisci {{ item.domanda }}" value="" [required]="item.obbligatorio">

                  <div *ngIf="SetOpt.get(item.domanda)?.hasError('required') && (SetOpt.get(item.domanda)?.touched || SetOpt.get(item.domanda)?.dirty)" class="text-danger">
                    Questo campo è obbligatorio.
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="row rowdcp mt-5">
            <div class="update ml-auto mr-auto">
              <button type="submit" (click)="storeOpt()" class="btn bottoniFormConferma">
                Salva Opzioni
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div [hidden]="matspinner">
  <mat-spinner  class="centered-element-spinner large-spinner" ></mat-spinner>
</div>
