<div class="col-md-8" [@pageTransition]="state">
  <div class="card card-user" id="nuovocontraente">
    <div class="card-header">
      <h3 class="card-title">Registrazione del Contraente</h3>
    </div>
    <div class="card-body">

      <div class="row">
        <div class="col-md-6 pr-1">
          <div class="form-group">
            <label class="form-label">Tipologia Contraente </label>
            <select type="number" class="form-select typeContratto" (change)="changeType($event)"
              [(ngModel)]="selectTipecliente">
              <option [ngValue]="0">Business</option>
              <option [ngValue]="1">Consumer</option>
            </select>
          </div>
          <div class="form-group" *ngIf="valoretypecli==tipocli">
            <button type="button" class="btn bottoniFormConferma" (click)="copiadati()">Copiare i dati?</button>
          </div>

        </div>
      </div>
      <hr>
      <form [formGroup]="newContraente">
        <!-- <input type="hidden" class="form-control" formControlName="us_padre" value="{{user_padre}}"> -->

        <div class="row" *ngIf="selectTipecliente == 1">
          <div class="col-md-6 pr-1">
            <div class="form-group">
              <label>Nome</label>
              <input type="text" class="form-control" formControlName="nome" placeholder="Nome Cliente" value="" [ngClass]="{'input-error': newContraente.get('nome')?.errors && showError}">
            </div>
          </div>
          <div class="col-md-6 pl-1">
            <div class="form-group">
              <label>Cognome</label>
              <input type="text" class="form-control" formControlName="cognome" placeholder="Cognome Cliente" value="" [ngClass]="{'input-error': newContraente.get('cognome')?.errors && showError}">
            </div>
          </div>
        </div>

        <div class="row" *ngIf="selectTipecliente == 0">
          <div class="col-md-12 pr-1">
            <div class="form-group">
              <label>Ragione Sociale</label>
              <input type="text" class="form-control" formControlName="ragione_sociale"
                placeholder="Inserisci la Ragione Sociale" value="" [ngClass]="{'input-error': newContraente.get('ragione_sociale')?.errors && showError}">
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 pl-1" *ngIf="selectTipecliente == 0">
            <div class="form-group">
              <label>Partita Iva</label>
              <input type="text" maxlength="12" class="form-control" formControlName="partita_iva"
                placeholder="Inserire Partita Iva" value="" [ngClass]="{'input-error': newContraente.get('partita_iva')?.errors && showError}">
            </div>
          </div>
          <div class="col-md-6 pl-1" *ngIf="selectTipecliente == 1">
            <div class="form-group">
              <label>Codice Fiscale</label>
              <input type="text" maxlength="16" class="form-control" formControlName="codice_fiscale"
                placeholder="Inserire Codice Fiscale" value="" [ngClass]="{'input-error': newContraente.get('codice_fiscale')?.errors && showError}">
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label>Email</label>
              <input type="text" class="form-control" formControlName="email" placeholder="Indirizzo Email" value="" [ngClass]="{'input-error': newContraente.get('email')?.errors && showError}">
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Telefono</label>
              <input type="text" class="form-control" formControlName="telefono" placeholder="Telefono" value="" [ngClass]="{'input-error': newContraente.get('telefono')?.errors && showError}">
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group">
              <label>Indirizzo</label>
              <input type="text" class="form-control" formControlName="indirizzo" placeholder="Indirizzo Civico" value="" [ngClass]="{'input-error': newContraente.get('indirizzo')?.errors && showError}">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-4 pr-1">
            <div class="form-group">
              <label>Città</label>
              <input type="text" class="form-control" formControlName="citta" placeholder="Città" value="" [ngClass]="{'input-error': newContraente.get('citta')?.errors && showError} ">
            </div>
          </div>
          <div class="col-md-4 px-1">
            <div class="form-group">
              <label>Nazione</label>
              <input type="text" class="form-control" formControlName="nazione" placeholder="Nazione" value="" [ngClass]="{'input-error': newContraente.get('nazione')?.errors && showError}">
            </div>
          </div>
          <div class="col-md-4 pl-1">
            <div class="form-group">
              <label>CAP</label>
              <input type="text" class="form-control" formControlName="cap" placeholder="CAP" [ngClass]="{'input-error': newContraente.get('cap')?.errors && showError}">
            </div>
          </div>
        </div>
        <div class="row">
          <div class="update ml-auto mr-auto">
            <button type="submit" class="btn bottoniFormConferma" (click)="storeContraente()">Registra Contraente</button>
            <!-- (click)="storeCliente()" -->
          </div>
        </div>
      </form>
    </div>
  </div>
</div>


<div [hidden]="matspinner">
  <mat-spinner class="centered-element-spinner large-spinner"></mat-spinner>
</div>
